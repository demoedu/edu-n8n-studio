{
  "updatedAt": "2025-10-17T10:23:07.000Z",
  "createdAt": "2025-10-17T07:09:55.295Z",
  "id": "nPppSmMzaqMV2k7N",
  "name": "My workflow",
  "description": null,
  "active": false,
  "isArchived": true,
  "nodes": [
    {
      "parameters": {
        "promptType": "define",
        "text": "ë„ˆëŠ” 30ë…„ì°¨ ì‹œë‹ˆì–´ ê±´ê°•ê´€ë¦¬ ì „ë¬¸ê°€ì•¼.\n\nì‹œë‹ˆì–´ ê±´ê´‘ê´€ë¦¬ë¥¼ ìœ„í•œ íŒì„ í•˜ë‚˜ ì°¾ì•„ì„œ **ì •í™•íˆ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œë§Œ** ì‘ì„±í•´ì¤˜:\n\nì œëª©: [30ì ì´ë‚´ì˜ ì„íŒ©íŠ¸ ìˆëŠ” ì œëª©]\në‚´ìš©: [ì´ìŠˆë¥¼ 35-40ì´ˆ ë¶„ëŸ‰ìœ¼ë¡œ ì„¤ëª…í•  ìˆ˜ ìˆëŠ” í¥ë¯¸ë¡œìš´ ìŠ¤í† ë¦¬, 12ë¬¸ì¥]\n\nì¡°ê±´:\n- ê¶Œì¥ ì£¼ì œ: ì‹œë‹ˆì–´ ê±´ê°•ê´€ë¦¬ë²•, ëª¸ì—ì¢‹ì€ ìŒì‹ ë° íš¨ëŠ¥, ì‹œë‹ˆì–´ ì •ì‹ ê±´ê°• ê´€ë¦¬\n\n- ìŠ¤í† ë¦¬ëŠ” **ì •í™•íˆ 12ë¬¸ì¥**ìœ¼ë¡œ êµ¬ì„±\n\n**ì¤‘ìš”: ë°˜ë“œì‹œ \"ì œëª©:\"ê³¼ \"ë‚´ìš©:\"ìœ¼ë¡œ ì‹œì‘í•˜ëŠ” ë‘ ì¤„ë§Œ ì¶œë ¥í•˜ê³ , ë‹¤ë¥¸ ì„¤ëª…ì´ë‚˜ ì½”ë©˜íŠ¸ëŠ” ì ˆëŒ€ ì¶”ê°€í•˜ì§€ ë§ˆì„¸ìš”.**",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        -5920,
        752
      ],
      "id": "32470aea-5352-43f6-b181-b17ef5dbd9d6",
      "name": "1. ì£¼ì œ ìƒì„±"
    },
    {
      "parameters": {
        "jsCode": "const aiOutput = $input.first().json.output;\n\nconsole.log('=== AI ì¶œë ¥ ì›ë³¸ ===');\nconsole.log(aiOutput);\nconsole.log('===================');\n\ntry {\n  // ì—¬ëŸ¬ ê°€ì§€ íŒ¨í„´ìœ¼ë¡œ ì œëª©ê³¼ ë‚´ìš© ì¶”ì¶œ ì‹œë„\n  let title = '';\n  let content = '';\n  \n  // íŒ¨í„´ 1: \"ì œëª©:\" ìœ¼ë¡œ ì‹œì‘í•˜ëŠ” ê²½ìš°\n  const titleMatch1 = aiOutput.match(/ì œëª©:\\s*(.+)/);\n  const contentMatch1 = aiOutput.match(/ë‚´ìš©:\\s*([\\s\\S]+)/);\n  \n  // íŒ¨í„´ 2: \"**ì œëª©:**\" ì²˜ëŸ¼ ë§ˆí¬ë‹¤ìš´ í˜•ì‹ì¸ ê²½ìš°\n  const titleMatch2 = aiOutput.match(/\\*\\*ì œëª©:\\*\\*\\s*(.+)/);\n  const contentMatch2 = aiOutput.match(/\\*\\*ë‚´ìš©:\\*\\*\\s*([\\s\\S]+)/);\n  \n  // íŒ¨í„´ 3: ì²« ë²ˆì§¸ ì¤„ì´ ì œëª©, ë‚˜ë¨¸ì§€ê°€ ë‚´ìš©ì¸ ê²½ìš°\n  const lines = aiOutput.split('\\n').filter(l => l.trim().length > 0);\n  \n  if (titleMatch1 && contentMatch1) {\n    title = titleMatch1[1].trim();\n    content = contentMatch1[1].trim();\n    console.log('âœ… íŒ¨í„´ 1ë¡œ ì¶”ì¶œ ì„±ê³µ');\n  } else if (titleMatch2 && contentMatch2) {\n    title = titleMatch2[1].trim();\n    content = contentMatch2[1].trim();\n    console.log('âœ… íŒ¨í„´ 2ë¡œ ì¶”ì¶œ ì„±ê³µ');\n  } else if (lines.length >= 2) {\n    title = lines[0].replace(/^ì œëª©:\\s*/i, '').replace(/^\\*\\*ì œëª©:\\*\\*\\s*/i, '').trim();\n    content = lines.slice(1).join(' ').replace(/^ë‚´ìš©:\\s*/i, '').replace(/^\\*\\*ë‚´ìš©:\\*\\*\\s*/i, '').trim();\n    console.log('âœ… íŒ¨í„´ 3ìœ¼ë¡œ ì¶”ì¶œ ì„±ê³µ');\n  } else {\n    console.error('âŒ ëª¨ë“  íŒ¨í„´ ì‹¤íŒ¨');\n    console.error('AI ì¶œë ¥:', aiOutput);\n    throw new Error('AI ì¶œë ¥ì—ì„œ ì œëª©ê³¼ ë‚´ìš©ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');\n  }\n  \n  // ì œëª©ì´ ë„ˆë¬´ ê¸¸ë©´ ìë¥´ê¸°\n  if (title.length > 50) {\n    title = title.substring(0, 47) + '...';\n    console.log('âš ï¸ ì œëª©ì´ ë„ˆë¬´ ê¸¸ì–´ì„œ ìë¦„');\n  }\n  \n  if (content.length < 50) {\n    console.warn('âš ï¸ ë‚´ìš©ì´ ë„ˆë¬´ ì§§ìŠµë‹ˆë‹¤:', content.length, 'ì');\n  }\n  \n  console.log('ğŸ“Œ ì œëª©:', title);\n  console.log('ğŸ“Œ ë‚´ìš© ê¸¸ì´:', content.length, 'ì');\n  \n  // ì¥ë©´ ë¶„í•  - 12ê°œë¡œ ê³ ì •\n  const sentences = content.split(/[.!?]\\s+/).filter(s => s.length > 10);\n  const scenesCount = 12; // 12ê°œ ê³ ì •\n  const scenes = [];\n  \n  // ë¬¸ì¥ì„ 12ê°œ ì¥ë©´ìœ¼ë¡œ ë¶„ë°°\n  for (let i = 0; i < scenesCount; i++) {\n    const sentenceIndex = Math.floor(i * sentences.length / scenesCount);\n    scenes.push({\n      sceneNumber: i + 1,\n      text: sentences[sentenceIndex] || sentences[0] || content,\n      duration: 3, // ëª¨ë“  ì¥ë©´ 3ì´ˆ\n      batchNumber: Math.floor(i / 4) + 1 // ë°°ì¹˜ ë²ˆí˜¸ (1, 2, 3)\n    });\n  }\n  \n  const workId = `video_${Date.now()}`;\n  const tmpDir = `/tmp/videos/${workId}`;\n  \n  console.log(`âœ… ì‘ì—… ID: ${workId}`);\n  console.log(`âœ… ì´ ${scenesCount}ê°œ ì¥ë©´ ìƒì„± (ê° 3ì´ˆ)`);\n  console.log(`ğŸ“Š ì˜ˆìƒ ì´ ê¸¸ì´: ${scenesCount * 3}ì´ˆ`);\n  \n  return {\n    json: {\n      workId: workId,\n      tmpDir: tmpDir,\n      videoTitle: title,\n      fullScript: content,\n      scenes: scenes,\n      totalScenes: scenesCount,\n      timestamp: new Date().toISOString(),\n      aiRawOutput: aiOutput\n    }\n  };\n  \n} catch (error) {\n  console.error('âŒ ë°ì´í„° ì¶”ì¶œ ì‹¤íŒ¨:', error.message);\n  console.error('AI ì›ë³¸ ì¶œë ¥:', aiOutput);\n  throw new Error(`ë°ì´í„° ì¶”ì¶œ ì‹¤íŒ¨: ${error.message}\\n\\nAI ì¶œë ¥:\\n${aiOutput}`);\n}"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -5616,
        752
      ],
      "id": "c0b62662-4824-4770-89fe-ea6f906516d4",
      "name": "2. ë°ì´í„° ì¶”ì¶œ"
    },
    {
      "parameters": {
        "fieldToSplitOut": "scenes",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        -4736,
        752
      ],
      "id": "cc833741-65d4-42d4-b89f-5d31957a8f28",
      "name": "4. ì¥ë©´ ë¶„í• "
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=ë‹¤ìŒ í•œêµ­ì–´ ìŠ¤í† ë¦¬ë¥¼ ì˜ì–´ ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸ë¡œ ë³€í™˜í•´ì¤˜:\n\n{{ $json.text }}\n\nìš”êµ¬ì‚¬í•­:\n- í•œêµ­ì‚¬ëŒìœ¼ë¡œ í•œì •\n- ìœ íŠœë¸Œ ì‡¼ì¸ ìš© ì„¸ë¡œ ì´ë¯¸ì§€ (9:16 ë¹„ìœ¨, vertical format)\n- ì‚¬ì‹¤ì ì´ê³  ìƒë™ê° ìˆëŠ” ì¥ë©´\n- í…ìŠ¤íŠ¸ë‚˜ ê¸€ì ì œì™¸\n- Photorealistic, 4K quality\n- 100ë‹¨ì–´ ì´ë‚´\n\nì˜¤ì§ ì˜ì–´ í”„ë¡¬í”„íŠ¸ë§Œ ì¶œë ¥.",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        -4064,
        608
      ],
      "id": "4706dfbf-4929-4204-aaf6-588147e5e892",
      "name": "5a. ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸"
    },
    {
      "parameters": {
        "resource": "image",
        "modelId": {
          "__rl": true,
          "value": "models/imagen-3.0-generate-002",
          "mode": "list"
        },
        "prompt": "={{ $json.output }}\n\nVertical format, 9:16 aspect ratio, photorealistic, 4K quality",
        "options": {
          "sampleCount": 1
        }
      },
      "type": "@n8n/n8n-nodes-langchain.googleGemini",
      "typeVersion": 1,
      "position": [
        -3712,
        32
      ],
      "id": "50d0538e-99e2-4892-b460-25b0743b7c39",
      "name": "6a. ì´ë¯¸ì§€ ìƒì„±"
    },
    {
      "parameters": {
        "numberInputs": 4
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3,
      "position": [
        -2576,
        720
      ],
      "id": "1b496d7f-45cb-444d-bc61-2c316de9fb45",
      "name": "8. ë°ì´í„° ë³‘í•©"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=ë‹¤ìŒ ìŠ¤í† ë¦¬ë¥¼ ìœ íŠœë¸Œ ì‡¼ì¸ ìš© **ì •í™•íˆ 35-40ì´ˆ ë¶„ëŸ‰** ë‚´ë ˆì´ì…˜ìœ¼ë¡œ ì‘ì„±í•´ì¤˜:\n\n{{ $('2. ë°ì´í„° ì¶”ì¶œ').first().json.fullScript }}\n\nìš”êµ¬ì‚¬í•­:\n- ì²« 3ì´ˆì— ì‹œì²­ì ì£¼ëª© ëŒê¸°\n- êµ¬ì–´ì²´, ìì—°ìŠ¤ëŸ¬ìš´ ë§íˆ¬\n- ê°„ê²°í•˜ê³  ë¦¬ë“¬ê° ìˆê²Œ\n- **ì •í™•íˆ 35-40ì´ˆ ë¶„ëŸ‰** (130-160ë‹¨ì–´)\n- ìì—°ìŠ¤ëŸ¬ìš´ í˜¸í¡ê³¼ ê°•ì•½ ì¡°ì ˆ\n\nì˜¤ì§ ë‚´ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸ë§Œ ì¶œë ¥.",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        -4048,
        944
      ],
      "id": "8d2ef1fc-07e2-4d0a-a3e2-4c91f5b62d53",
      "name": "5b. ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±"
    },
    {
      "parameters": {
        "command": "=#!/bin/bash\n# 10. ë™ì˜ìƒ ì œì‘ - ì˜¤ë””ì˜¤ ì‹±í¬ ë²„ì „\n\nTMP_DIR=\"{{ $('2. ë°ì´í„° ì¶”ì¶œ').first().json.tmpDir }}\"\n\necho \"=== ë™ì˜ìƒ ì œì‘ ì‹œì‘ ===\"\necho \"ğŸ“ tmpDir: $TMP_DIR\"\n\n# ë””ë ‰í† ë¦¬ í™•ì¸\nif [ ! -d \"$TMP_DIR\" ]; then\n    echo \"âŒ ë””ë ‰í† ë¦¬ê°€ ì—†ìŠµë‹ˆë‹¤: $TMP_DIR\"\n    exit 1\nfi\n\ncd \"$TMP_DIR\" || exit 1\necho \"âœ… í˜„ì¬ ë””ë ‰í† ë¦¬: $(pwd)\"\necho \"\"\n\n# íŒŒì¼ í™•ì¸\necho \"ğŸ“‹ íŒŒì¼ ëª©ë¡:\"\nls -lh\necho \"\"\n\n# concat.txt í™•ì¸\nif [ ! -f \"concat.txt\" ]; then\n    echo \"âŒ concat.txt ì—†ìŒ!\"\n    exit 1\nfi\n\necho \"ğŸ“ concat.txt ë‚´ìš©:\"\ncat concat.txt\necho \"\"\n\n# audio.mp3 í™•ì¸\nif [ ! -f \"audio.mp3\" ]; then\n    echo \"âŒ audio.mp3 ì—†ìŒ!\"\n    exit 1\nfi\n\n# ì´ë¯¸ì§€ íŒŒì¼ í™•ì¸\nIMAGE_COUNT=$(ls -1 scene_*.png 2>/dev/null | wc -l)\nif [ \"$IMAGE_COUNT\" -eq 0 ]; then\n    echo \"âŒ ì´ë¯¸ì§€ íŒŒì¼ ì—†ìŒ!\"\n    exit 1\nfi\n\necho \"âœ… concat.txt: OK\"\necho \"âœ… audio.mp3: OK\"\necho \"âœ… ì´ë¯¸ì§€: ${IMAGE_COUNT}ê°œ\"\necho \"\"\n\n# ì˜¤ë””ì˜¤ ê¸¸ì´ í™•ì¸ (FFprobe ì‚¬ìš©)\nAUDIO_DURATION=$(ffprobe -v error -show_entries format=duration -of default=noprint_wrappers=1:nokey=1 audio.mp3 2>/dev/null)\necho \"ğŸ”Š ì˜¤ë””ì˜¤ ê¸¸ì´: ${AUDIO_DURATION}ì´ˆ\"\necho \"\"\n\n# FFmpeg ì‹¤í–‰ - ì¤‘ìš”: -shortest ì œê±°!\necho \"ğŸ¬ FFmpeg ì‹¤í–‰ ì¤‘...\"\nffmpeg -y -hide_banner \\\n  -f concat -safe 0 -i concat.txt \\\n  -i audio.mp3 \\\n  -vf \"scale=1080:1920:force_original_aspect_ratio=decrease,pad=1080:1920:(ow-iw)/2:(oh-ih)/2:black,fps=30\" \\\n  -c:v libx264 -preset medium -crf 23 \\\n  -c:a aac -b:a 192k \\\n  -pix_fmt yuv420p \\\n  -movflags +faststart \\\n  output.mp4\n\n# âš ï¸ -shortest ì˜µì…˜ ì œê±°ë¨!\n# ì´ì œ ì˜¤ë””ì˜¤ê°€ ëë‚  ë•Œê¹Œì§€ ì˜ìƒì´ ì¬ìƒë©ë‹ˆë‹¤.\n\n# ê²°ê³¼ í™•ì¸\nif [ -f \"output.mp4\" ]; then\n    FILE_SIZE=$(ls -lh output.mp4 | awk '{print $5}')\n    VIDEO_DURATION=$(ffprobe -v error -show_entries format=duration -of default=noprint_wrappers=1:nokey=1 output.mp4 2>/dev/null)\n    echo \"\"\n    echo \"âœ… ë™ì˜ìƒ ìƒì„± ì™„ë£Œ!\"\n    echo \"ğŸ“ íŒŒì¼: output.mp4\"\n    echo \"ğŸ’¾ í¬ê¸°: $FILE_SIZE\"\n    echo \"â±ï¸ ì˜ìƒ ê¸¸ì´: ${VIDEO_DURATION}ì´ˆ\"\nelse\n    echo \"âŒ ë™ì˜ìƒ ìƒì„± ì‹¤íŒ¨!\"\n    exit 1\nfi"
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        -2000,
        752
      ],
      "id": "e962984f-5d29-4968-8759-ea2c0ae57657",
      "name": "10. ë™ì˜ìƒ ì œì‘"
    },
    {
      "parameters": {
        "fileSelector": "={{ $('9-1. Concat íŒŒì¼ ë‚´ìš© ìƒì„±').first().json.outputPath }}",
        "options": {}
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        -1808,
        752
      ],
      "id": "245d2de7-ec99-484e-a78a-4e650d04d35b",
      "name": "11. ë™ì˜ìƒ ì½ê¸°"
    },
    {
      "parameters": {
        "resource": "video",
        "operation": "upload",
        "title": "={{ $('9-1. Concat íŒŒì¼ ë‚´ìš© ìƒì„±').first().json.videoTitle }}",
        "regionCode": "KR",
        "categoryId": "24",
        "options": {
          "defaultLanguage": "ko",
          "description": "={{ $('9-1. Concat íŒŒì¼ ë‚´ìš© ìƒì„±').first().json.fullScript }}",
          "embeddable": false,
          "license": "youtube",
          "privacyStatus": "public",
          "publicStatsViewable": true,
          "selfDeclaredMadeForKids": false,
          "tags": "=ì‹œë‹ˆì–´, 50ëŒ€ê±´ê°•, 60ëŒ€ê±´ê°•, 70ëŒ€ê±´ê°•, ì˜¤íŒ”ì„¸ëŒ€, ì¤‘ë…„ê±´ê°•, ë…¸ë…„ê±´ê°•, ë¶€ëª¨ë‹˜ê±´ê°•, ê±´ê°•, ê±´ê°•ì •ë³´, ê±´ê°•ê´€ë¦¬, ì‹œë‹ˆì–´ê±´ê°•, ê±´ê°•ìƒì‹, ê±´ê°•ì‡¼ì¸ , 1ë¶„ê±´ê°•, ìœ íŠœë¸Œì‡¼ì¸ "
        }
      },
      "type": "n8n-nodes-base.youTube",
      "typeVersion": 1,
      "position": [
        -1600,
        752
      ],
      "id": "b2790868-6979-4870-ad08-cbfa656ab4c7",
      "name": "12. ìœ íŠœë¸Œ ì—…ë¡œë“œ",
      "alwaysOutputData": false
    },
    {
      "parameters": {
        "command": "=rm -rf {{ $('2. ë°ì´í„° ì¶”ì¶œ').first().json.tmpDir }}"
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        -1408,
        752
      ],
      "id": "e4114222-b6cd-4e88-8408-348fdca22c48",
      "name": "13. ì •ë¦¬"
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.0-flash-thinking-exp-1219",
        "options": {
          "temperature": 0.9
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        -5920,
        944
      ],
      "id": "63192fa3-de2c-4e73-ba44-e63c350406f9",
      "name": "Google Gemini Chat Model"
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.0-flash-thinking-exp-1219",
        "options": {
          "temperature": 0.9
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        -4048,
        1120
      ],
      "id": "d2df4dae-c959-4149-8411-47774e124cfa",
      "name": "Google Gemini Chat Model1"
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.0-flash-thinking-exp-1219",
        "options": {
          "temperature": 0.9
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        -4064,
        768
      ],
      "id": "6b66d5d1-6107-416e-9f9b-139296615688",
      "name": "Google Gemini Chat Model2"
    },
    {
      "parameters": {
        "jsCode": "// 7a-1. ì´ë¯¸ì§€ ë°ì´í„° ì¤€ë¹„ - ë°°ì¹˜1 (scene 1-4)\n\nconst items = $input.all();\nconst tmpDir = $('2. ë°ì´í„° ì¶”ì¶œ').first().json.tmpDir;\nconst BATCH_NUMBER = 1; // ë°°ì¹˜1 ê³ ì •\n\nconsole.log('=== ë°°ì¹˜ 1 ì´ë¯¸ì§€ ë°ì´í„° ì¤€ë¹„ ===');\nconsole.log('ì…ë ¥ ì•„ì´í…œ ê°œìˆ˜:', items.length);\nconsole.log('tmpDir:', tmpDir);\n\n// ë°°ì¹˜1ì˜ ì¥ë©´ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° (sceneNumber 1-4)\nconst allScenes = $('4. ì¥ë©´ ë¶„í• ').all();\nconst originalScenes = allScenes.filter(s => s.json.batchNumber === BATCH_NUMBER);\n\nconsole.log('ë°°ì¹˜', BATCH_NUMBER, ':', originalScenes.length, 'ê°œ ì¥ë©´');\n\nif (originalScenes.length === 0) {\n  throw new Error('ë°°ì¹˜ 1 ì¥ë©´ ë°ì´í„° ì—†ìŒ');\n}\n\nconst results = [];\n\nfor (let i = 0; i < items.length; i++) {\n  const item = items[i];\n  const binaryData = item.binary;\n  \n  if (!binaryData) {\n    console.error('ì•„ì´í…œ', i + 1, ': Binary ë°ì´í„° ì—†ìŒ');\n    continue;\n  }\n  \n  const binaryKey = Object.keys(binaryData)[0];\n  if (!binaryKey) {\n    console.error('ì•„ì´í…œ', i + 1, ': Binary í‚¤ ì—†ìŒ');\n    continue;\n  }\n  \n  if (i >= originalScenes.length) {\n    console.error('ì•„ì´í…œ', i + 1, ': ì›ë³¸ ì¥ë©´ ì¸ë±ìŠ¤ ì´ˆê³¼');\n    continue;\n  }\n  \n  const originalScene = originalScenes[i];\n  const sceneNumber = originalScene.json.sceneNumber;\n  const text = originalScene.json.text;\n  const duration = originalScene.json.duration;\n  \n  const fileName = 'scene_' + String(sceneNumber).padStart(2, '0') + '.png';\n  const filePath = tmpDir + '/' + fileName;\n  \n  console.log('âœ… ì¥ë©´', sceneNumber, ':', fileName, '(', duration, 'ì´ˆ)');\n  \n  results.push({\n    json: {\n      sceneNumber: sceneNumber,\n      text: text,\n      duration: duration,\n      filePath: filePath,\n      fileName: fileName,\n      tmpDir: tmpDir\n    },\n    binary: {\n      data: binaryData[binaryKey]\n    }\n  });\n}\n\nconsole.log('âœ… ë°°ì¹˜ 1 ì´', results.length, 'ê°œ ì´ë¯¸ì§€ ì¤€ë¹„ ì™„ë£Œ');\n\nif (results.length === 0) {\n  throw new Error('ì²˜ë¦¬ëœ ì´ë¯¸ì§€ê°€ ì—†ìŠµë‹ˆë‹¤.');\n}\n\nreturn results;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -3488,
        32
      ],
      "id": "192d9b1c-f928-407b-8e88-8a616fc7172c",
      "name": "7a-1. ì´ë¯¸ì§€ ë°ì´í„° ì¤€ë¹„"
    },
    {
      "parameters": {
        "jsCode": "const tmpDir = $('2. ë°ì´í„° ì¶”ì¶œ').first().json.tmpDir;\nconst audioPath = `${tmpDir}/audio.mp3`;\n\nconsole.log('=== ì˜¤ë””ì˜¤ ì €ì¥ ì¤€ë¹„ ===');\nconsole.log('ì €ì¥ ê²½ë¡œ:', audioPath);\nconsole.log('tmpDir:', tmpDir);\n\n// Binary ë°ì´í„° í™•ì¸\nconst inputItem = $input.first();\nconst binaryData = inputItem.binary;\n\nif (!binaryData) {\n  throw new Error('TTS ìƒì„± ì‹¤íŒ¨: Binary ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.');\n}\n\n// Binary í•„ë“œ ì´ë¦„ í™•ì¸ (ì²« ë²ˆì§¸ í•„ë“œ ì‚¬ìš©)\nconst binaryKeys = Object.keys(binaryData);\nconsole.log('ì‚¬ìš© ê°€ëŠ¥í•œ Binary í•„ë“œ:', binaryKeys);\n\nif (binaryKeys.length === 0) {\n  throw new Error('TTS Binary ë°ì´í„°ì— í•„ë“œê°€ ì—†ìŠµë‹ˆë‹¤.');\n}\n\n// ì²« ë²ˆì§¸ Binary í•„ë“œë¥¼ 'data'ë¡œ í‘œì¤€í™”\nconst firstKey = binaryKeys[0];\nconsole.log('ì‚¬ìš©í•  Binary í•„ë“œ:', firstKey);\n\nreturn {\n  json: {\n    audioPath: audioPath,\n    tmpDir: tmpDir,\n    originalBinaryKey: firstKey  // ë””ë²„ê¹…ìš©\n  },\n  binary: {\n    data: binaryData[firstKey]  // 'data'ë¡œ í†µì¼\n  }\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -3488,
        944
      ],
      "id": "1c0bd229-65f6-4505-a7c3-4c657ba2c39c",
      "name": "7b-1. ì˜¤ë””ì˜¤ ê²½ë¡œ ì¤€ë¹„"
    },
    {
      "parameters": {
        "operation": "write",
        "fileName": "={{ $json.audioPath }}",
        "options": {}
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        -3248,
        944
      ],
      "id": "1fb647d7-a587-4201-810f-7047ed1fffa4",
      "name": "7b-2. ì˜¤ë””ì˜¤ íŒŒì¼ ì €ì¥"
    },
    {
      "parameters": {
        "jsCode": "// 9-1. Concat íŒŒì¼ ë‚´ìš© ìƒì„± - ë‹¨ìˆœ ë²„ì „\n\nconst allItems = $input.all();\n\nconsole.log('=== ë°ì´í„° ë³‘í•© ë° Concat íŒŒì¼ ìƒì„± ì‹œì‘ ===');\nconsole.log('ì´', allItems.length, 'ê°œ ì•„ì´í…œ ìˆ˜ì‹ ');\n\n// 1. ë°ì´í„° ë¶„ë¦¬\nconst originalData = $('2. ë°ì´í„° ì¶”ì¶œ').first().json;\nconst imageItems = allItems.filter(item => item.json.filePath);\nconst audioItem = allItems.find(item => item.json.audioPath);\n\nif (imageItems.length === 0 || !audioItem) {\n  throw new Error('ë³‘í•©ëœ ë°ì´í„°ì—ì„œ ì´ë¯¸ì§€ ë˜ëŠ” ì˜¤ë””ì˜¤ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');\n}\n\nconsole.log('âœ… ì´ë¯¸ì§€', imageItems.length, 'ê°œ, ì˜¤ë””ì˜¤ 1ê°œ í™•ì¸');\n\n// 2. ì •ë ¬\nimageItems.sort((a, b) => a.json.sceneNumber - b.json.sceneNumber);\n\n// 3. ì´ë¯¸ì§€ë‹¹ duration ê³ ì • (40ì´ˆ Ã· 12ì¥ = 3.33ì´ˆ)\nconst DURATION_PER_SCENE = 3.5; // 3.5ì´ˆì”© (ì´ 42ì´ˆ)\n\n// 4. Concat ìƒì„±\nconst concatLines = [];\nfor (const item of imageItems) {\n  const scene = item.json;\n  concatLines.push('file \\'' + scene.fileName + '\\'');\n  concatLines.push('duration ' + DURATION_PER_SCENE);\n  console.log('âœ… Scene', scene.sceneNumber, ':', scene.fileName, '(', DURATION_PER_SCENE, 'ì´ˆ)');\n}\n\n// ë§ˆì§€ë§‰ ì´ë¯¸ì§€ ì¶”ê°€\nif (imageItems.length > 0) {\n  concatLines.push('file \\'' + imageItems[imageItems.length - 1].json.fileName + '\\'');\n}\n\nconst concatContent = concatLines.join(String.fromCharCode(10));\n\nconsole.log('\\nì´', concatLines.length, 'ì¤„');\n\nreturn [{\n  json: {\n    tmpDir: originalData.tmpDir,\n    concatContent: concatContent,\n    videoTitle: originalData.videoTitle,\n    fullScript: originalData.fullScript,\n    outputPath: originalData.tmpDir + '/output.mp4'\n  }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -2384,
        752
      ],
      "id": "f822f236-2bd3-4302-83b0-4bab5946940a",
      "name": "9-1. Concat íŒŒì¼ ë‚´ìš© ìƒì„±"
    },
    {
      "parameters": {
        "command": "=mkdir -p {{ $json.tmpDir }} && echo \"âœ… ë””ë ‰í† ë¦¬ ìƒì„±: {{ $json.tmpDir }}\""
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        -5200,
        752
      ],
      "id": "d38ab0a7-ce47-4c3a-804a-5b25291e5139",
      "name": "3-1. ë””ë ‰í† ë¦¬ ìƒì„±"
    },
    {
      "parameters": {
        "jsCode": "// child_process ì œê±°! ë°ì´í„°ë§Œ ì „ë‹¬\nconst data = $input.first().json;\n\nconsole.log('=== ë°ì´í„° ì „ë‹¬ ===');\nconsole.log('ê²½ë¡œ:', data.tmpDir);\nconsole.log('ì „ë‹¬í•  scenes ê°œìˆ˜:', data.scenes.length);\n\nreturn {\n  json: data\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -5408,
        752
      ],
      "id": "0afbed6a-5556-45ab-a97a-7f4f559c0909",
      "name": "3. ë°ì´í„° ì „ë‹¬"
    },
    {
      "parameters": {
        "jsCode": "// Execute Command ê²°ê³¼ëŠ” ë¬´ì‹œí•˜ê³ , ì›ë³¸ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°\nconst originalData = $('3. ë°ì´í„° ì „ë‹¬').first().json;\n\nconsole.log('=== ë°ì´í„° ë³µì› ===');\nconsole.log('scenes ê°œìˆ˜:', originalData.scenes.length);\nconsole.log('tmpDir:', originalData.tmpDir);\n\nreturn {\n  json: originalData\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -4960,
        752
      ],
      "id": "4c3e8d7c-1e86-4e8d-9605-24dc9dedd037",
      "name": "3-2. ë°ì´í„° ë³µì›"
    },
    {
      "parameters": {},
      "type": "CUSTOM.googleSpeech",
      "typeVersion": 1,
      "position": [
        -3696,
        944
      ],
      "id": "30aa596d-bbd8-4d29-a3a7-b1ec31097e82",
      "name": "6b. TTS ìƒì„±",
      "credentials": {}
    },
    {
      "parameters": {
        "command": "=#!/bin/bash\n# 9-2. Concat íŒŒì¼ ì €ì¥ (ìµœì¢… ì™„ë²½ ë²„ì „)\n\nTMP_DIR=\"{{ $json.tmpDir }}\"\nCONCAT_FILE=\"${TMP_DIR}/concat.txt\"\n\necho \"=== Concat íŒŒì¼ ì €ì¥ ===\"\necho \"ğŸ“ tmpDir: $TMP_DIR\"\necho \"ğŸ“„ íŒŒì¼: $CONCAT_FILE\"\n\n# ë””ë ‰í† ë¦¬ í™•ì¸\nif [ ! -d \"$TMP_DIR\" ]; then\n    echo \"âŒ ë””ë ‰í† ë¦¬ê°€ ì—†ìŠµë‹ˆë‹¤: $TMP_DIR\"\n    exit 1\nfi\n\n# echo -eë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ìŠ¤ì¼€ì´í”„ ì‹œí€€ìŠ¤ í•´ì„\necho -e '{{ $json.concatContent }}' > \"$CONCAT_FILE\"\n\n# íŒŒì¼ ìƒì„± í™•ì¸\nif [ ! -f \"$CONCAT_FILE\" ]; then\n    echo \"âŒ concat.txt ìƒì„± ì‹¤íŒ¨\"\n    exit 1\nfi\n\necho \"âœ… concat.txt ìƒì„± ì™„ë£Œ\"\necho \"\"\n\n# ìƒì„±ëœ íŒŒì¼ ë‚´ìš© í™•ì¸\necho \"ğŸ“ concat.txt ë‚´ìš©:\"\ncat \"$CONCAT_FILE\"\necho \"\"\n\n# ì¤„ë°”ê¿ˆ ì œëŒ€ë¡œ ë˜ì—ˆëŠ”ì§€ í™•ì¸\nLINE_COUNT=$(wc -l < \"$CONCAT_FILE\")\necho \"ğŸ“Š ì´ ì¤„ ìˆ˜: $LINE_COUNT\"\n\n# ì´ë¯¸ì§€ íŒŒì¼ í™•ì¸\nIMAGE_COUNT=$(ls -1 \"$TMP_DIR\"/scene_*.png 2>/dev/null | wc -l)\necho \"ğŸ–¼ï¸ ì´ë¯¸ì§€ íŒŒì¼: ${IMAGE_COUNT}ê°œ\"\n\n# ê° ì´ë¯¸ì§€ íŒŒì¼ ì¡´ì¬ ì—¬ë¶€ í™•ì¸\necho \"ğŸ“‹ ì´ë¯¸ì§€ íŒŒì¼ ëª©ë¡:\"\nls -1 \"$TMP_DIR\"/scene_*.png 2>/dev/null || echo \"âŒ ì´ë¯¸ì§€ ì—†ìŒ\"\necho \"\"\n\n# ì˜¤ë””ì˜¤ íŒŒì¼ í™•ì¸\nif [ -f \"$TMP_DIR/audio.mp3\" ]; then\n    AUDIO_SIZE=$(ls -lh \"$TMP_DIR/audio.mp3\" | awk '{print $5}')\n    echo \"ğŸ”Š ì˜¤ë””ì˜¤: âœ… ($AUDIO_SIZE)\"\nelse\n    echo \"ğŸ”Š ì˜¤ë””ì˜¤: âŒ ì—†ìŒ\"\n    exit 1\nfi\n\necho \"\"\necho \"âœ… ëª¨ë“  íŒŒì¼ ì¤€ë¹„ ì™„ë£Œ!\""
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        -2192,
        752
      ],
      "id": "656e0f42-bb0a-4161-ba69-7ae31a416b6e",
      "name": "9-2. Concat íŒŒì¼ ì €ì¥"
    },
    {
      "parameters": {
        "resource": "image",
        "modelId": {
          "__rl": true,
          "value": "models/imagen-3.0-generate-002",
          "mode": "list"
        },
        "prompt": "={{ $json.output }}\n\nVertical format, 9:16 aspect ratio, photorealistic, 4K quality",
        "options": {
          "sampleCount": 1
        }
      },
      "type": "@n8n/n8n-nodes-langchain.googleGemini",
      "typeVersion": 1,
      "position": [
        -3712,
        320
      ],
      "id": "147ddca2-2b2e-4859-8a41-785fc49bc472",
      "name": "6a. ì´ë¯¸ì§€ ìƒì„±1"
    },
    {
      "parameters": {
        "jsCode": "// 7a-1. ì´ë¯¸ì§€ ë°ì´í„° ì¤€ë¹„1 - ë°°ì¹˜2 (scene 5-8)\n\nconst items = $input.all();\nconst tmpDir = $('2. ë°ì´í„° ì¶”ì¶œ').first().json.tmpDir;\nconst BATCH_NUMBER = 2; // ë°°ì¹˜2 ê³ ì •\n\nconsole.log('=== ë°°ì¹˜ 2 ì´ë¯¸ì§€ ë°ì´í„° ì¤€ë¹„ ===');\nconsole.log('ì…ë ¥ ì•„ì´í…œ ê°œìˆ˜:', items.length);\nconsole.log('tmpDir:', tmpDir);\n\n// ë°°ì¹˜2ì˜ ì¥ë©´ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° (sceneNumber 5-8)\nconst allScenes = $('4. ì¥ë©´ ë¶„í• ').all();\nconst originalScenes = allScenes.filter(s => s.json.batchNumber === BATCH_NUMBER);\n\nconsole.log('ë°°ì¹˜', BATCH_NUMBER, ':', originalScenes.length, 'ê°œ ì¥ë©´');\n\nif (originalScenes.length === 0) {\n  throw new Error('ë°°ì¹˜ 2 ì¥ë©´ ë°ì´í„° ì—†ìŒ');\n}\n\nconst results = [];\n\nfor (let i = 0; i < items.length; i++) {\n  const item = items[i];\n  const binaryData = item.binary;\n  \n  if (!binaryData) {\n    console.error('ì•„ì´í…œ', i + 1, ': Binary ë°ì´í„° ì—†ìŒ');\n    continue;\n  }\n  \n  const binaryKey = Object.keys(binaryData)[0];\n  if (!binaryKey) {\n    console.error('ì•„ì´í…œ', i + 1, ': Binary í‚¤ ì—†ìŒ');\n    continue;\n  }\n  \n  if (i >= originalScenes.length) {\n    console.error('ì•„ì´í…œ', i + 1, ': ì›ë³¸ ì¥ë©´ ì¸ë±ìŠ¤ ì´ˆê³¼');\n    continue;\n  }\n  \n  const originalScene = originalScenes[i];\n  const sceneNumber = originalScene.json.sceneNumber;\n  const text = originalScene.json.text;\n  const duration = originalScene.json.duration;\n  \n  const fileName = 'scene_' + String(sceneNumber).padStart(2, '0') + '.png';\n  const filePath = tmpDir + '/' + fileName;\n  \n  console.log('âœ… ì¥ë©´', sceneNumber, ':', fileName, '(', duration, 'ì´ˆ)');\n  \n  results.push({\n    json: {\n      sceneNumber: sceneNumber,\n      text: text,\n      duration: duration,\n      filePath: filePath,\n      fileName: fileName,\n      tmpDir: tmpDir\n    },\n    binary: {\n      data: binaryData[binaryKey]\n    }\n  });\n}\n\nconsole.log('âœ… ë°°ì¹˜ 2 ì´', results.length, 'ê°œ ì´ë¯¸ì§€ ì¤€ë¹„ ì™„ë£Œ');\n\nif (results.length === 0) {\n  throw new Error('ì²˜ë¦¬ëœ ì´ë¯¸ì§€ê°€ ì—†ìŠµë‹ˆë‹¤.');\n}\n\nreturn results;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -3488,
        320
      ],
      "id": "7e1a08bc-1e00-4b2d-93f9-c6ad2c962834",
      "name": "7a-1. ì´ë¯¸ì§€ ë°ì´í„° ì¤€ë¹„1"
    },
    {
      "parameters": {
        "operation": "write",
        "fileName": "={{ $json.filePath }}",
        "options": {}
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        -3264,
        320
      ],
      "id": "7b17d739-c306-44f1-ba80-3d406918f7ad",
      "name": "7a-2. ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥1"
    },
    {
      "parameters": {
        "resource": "image",
        "modelId": {
          "__rl": true,
          "value": "models/imagen-3.0-generate-002",
          "mode": "list"
        },
        "prompt": "={{ $json.output }}\n\nVertical format, 9:16 aspect ratio, photorealistic, 4K quality",
        "options": {
          "sampleCount": 1
        }
      },
      "type": "@n8n/n8n-nodes-langchain.googleGemini",
      "typeVersion": 1,
      "position": [
        -3712,
        608
      ],
      "id": "add7c793-cadd-43ad-8f99-7d831f755b16",
      "name": "6a. ì´ë¯¸ì§€ ìƒì„±2"
    },
    {
      "parameters": {
        "jsCode": "// 7a-1. ì´ë¯¸ì§€ ë°ì´í„° ì¤€ë¹„2 - ë°°ì¹˜3 (scene 9-12)\n\nconst items = $input.all();\nconst tmpDir = $('2. ë°ì´í„° ì¶”ì¶œ').first().json.tmpDir;\nconst BATCH_NUMBER = 3; // ë°°ì¹˜3 ê³ ì •\n\nconsole.log('=== ë°°ì¹˜ 3 ì´ë¯¸ì§€ ë°ì´í„° ì¤€ë¹„ ===');\nconsole.log('ì…ë ¥ ì•„ì´í…œ ê°œìˆ˜:', items.length);\nconsole.log('tmpDir:', tmpDir);\n\n// ë°°ì¹˜3ì˜ ì¥ë©´ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° (sceneNumber 9-12)\nconst allScenes = $('4. ì¥ë©´ ë¶„í• ').all();\nconst originalScenes = allScenes.filter(s => s.json.batchNumber === BATCH_NUMBER);\n\nconsole.log('ë°°ì¹˜', BATCH_NUMBER, ':', originalScenes.length, 'ê°œ ì¥ë©´');\n\nif (originalScenes.length === 0) {\n  throw new Error('ë°°ì¹˜ 3 ì¥ë©´ ë°ì´í„° ì—†ìŒ');\n}\n\nconst results = [];\n\nfor (let i = 0; i < items.length; i++) {\n  const item = items[i];\n  const binaryData = item.binary;\n  \n  if (!binaryData) {\n    console.error('ì•„ì´í…œ', i + 1, ': Binary ë°ì´í„° ì—†ìŒ');\n    continue;\n  }\n  \n  const binaryKey = Object.keys(binaryData)[0];\n  if (!binaryKey) {\n    console.error('ì•„ì´í…œ', i + 1, ': Binary í‚¤ ì—†ìŒ');\n    continue;\n  }\n  \n  if (i >= originalScenes.length) {\n    console.error('ì•„ì´í…œ', i + 1, ': ì›ë³¸ ì¥ë©´ ì¸ë±ìŠ¤ ì´ˆê³¼');\n    continue;\n  }\n  \n  const originalScene = originalScenes[i];\n  const sceneNumber = originalScene.json.sceneNumber;\n  const text = originalScene.json.text;\n  const duration = originalScene.json.duration;\n  \n  const fileName = 'scene_' + String(sceneNumber).padStart(2, '0') + '.png';\n  const filePath = tmpDir + '/' + fileName;\n  \n  console.log('âœ… ì¥ë©´', sceneNumber, ':', fileName, '(', duration, 'ì´ˆ)');\n  \n  results.push({\n    json: {\n      sceneNumber: sceneNumber,\n      text: text,\n      duration: duration,\n      filePath: filePath,\n      fileName: fileName,\n      tmpDir: tmpDir\n    },\n    binary: {\n      data: binaryData[binaryKey]\n    }\n  });\n}\n\nconsole.log('âœ… ë°°ì¹˜ 3 ì´', results.length, 'ê°œ ì´ë¯¸ì§€ ì¤€ë¹„ ì™„ë£Œ');\n\nif (results.length === 0) {\n  throw new Error('ì²˜ë¦¬ëœ ì´ë¯¸ì§€ê°€ ì—†ìŠµë‹ˆë‹¤.');\n}\n\nreturn results;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -3488,
        608
      ],
      "id": "ee552987-1667-4c70-933b-6dac2d145d30",
      "name": "7a-1. ì´ë¯¸ì§€ ë°ì´í„° ì¤€ë¹„2"
    },
    {
      "parameters": {
        "operation": "write",
        "fileName": "={{ $json.filePath }}",
        "options": {}
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        -3264,
        608
      ],
      "id": "dba63d0a-e992-4503-b511-28a469b2433a",
      "name": "7a-2. ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥2"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=ë‹¤ìŒ í•œêµ­ì–´ ìŠ¤í† ë¦¬ë¥¼ ì˜ì–´ ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸ë¡œ ë³€í™˜í•´ì¤˜:\n\n{{ $json.text }}\n\nìš”êµ¬ì‚¬í•­:\n- í•œêµ­ì‚¬ëŒìœ¼ë¡œ í•œì •\n- ìœ íŠœë¸Œ ì‡¼ì¸ ìš© ì„¸ë¡œ ì´ë¯¸ì§€ (9:16 ë¹„ìœ¨, vertical format)\n- ì‚¬ì‹¤ì ì´ê³  ìƒë™ê° ìˆëŠ” ì¥ë©´\n- í…ìŠ¤íŠ¸ë‚˜ ê¸€ì ì œì™¸\n- Photorealistic, 4K quality\n- 100ë‹¨ì–´ ì´ë‚´\n\nì˜¤ì§ ì˜ì–´ í”„ë¡¬í”„íŠ¸ë§Œ ì¶œë ¥.",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        -4064,
        320
      ],
      "id": "2104e0e7-d8ba-4ce3-8ce0-8a40741eff42",
      "name": "5a. ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸1"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=ë‹¤ìŒ í•œêµ­ì–´ ìŠ¤í† ë¦¬ë¥¼ ì˜ì–´ ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸ë¡œ ë³€í™˜í•´ì¤˜:\n\n{{ $json.text }}\n\nìš”êµ¬ì‚¬í•­:\n- í•œêµ­ì‚¬ëŒìœ¼ë¡œ í•œì •\n- ìœ íŠœë¸Œ ì‡¼ì¸ ìš© ì„¸ë¡œ ì´ë¯¸ì§€ (9:16 ë¹„ìœ¨, vertical format)\n- ì‚¬ì‹¤ì ì´ê³  ìƒë™ê° ìˆëŠ” ì¥ë©´\n- í…ìŠ¤íŠ¸ë‚˜ ê¸€ì ì œì™¸\n- Photorealistic, 4K quality\n- 100ë‹¨ì–´ ì´ë‚´\n\nì˜¤ì§ ì˜ì–´ í”„ë¡¬í”„íŠ¸ë§Œ ì¶œë ¥.",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        -4064,
        32
      ],
      "id": "e4ac47e8-48d0-4f39-8fb0-127ae57be00b",
      "name": "5a. ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸2"
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.0-flash-thinking-exp-1219",
        "options": {
          "temperature": 0.9
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        -4064,
        192
      ],
      "id": "cc909994-cc3a-4d73-bfd9-5a68aaf7e765",
      "name": "Google Gemini Chat Model3"
    },
    {
      "parameters": {
        "options": {
          "temperature": 0.9
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        -4064,
        480
      ],
      "id": "94f907ea-f553-497b-bef1-a41cafc20eae",
      "name": "Google Gemini Chat Model4"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "ffb5abe3-5018-4e4e-9161-25a06a4a50bc",
              "leftValue": "={{ $json.batchNumber }}",
              "rightValue": 1,
              "operator": {
                "type": "number",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -4400,
        48
      ],
      "id": "35048b91-f95d-4cf1-9cc2-c05dfa07c22e",
      "name": "4-1a. ë°°ì¹˜1 ë¶„ê¸°"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "ffb5abe3-5018-4e4e-9161-25a06a4a50bc",
              "leftValue": "={{ $json.batchNumber }}",
              "rightValue": 2,
              "operator": {
                "type": "number",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -4400,
        336
      ],
      "id": "7e602fd3-27e2-4fdc-b7e7-9708fa4278e3",
      "name": "4-1b. ë°°ì¹˜2 ë¶„ê¸°"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "ffb5abe3-5018-4e4e-9161-25a06a4a50bc",
              "leftValue": "={{ $json.batchNumber }}",
              "rightValue": 3,
              "operator": {
                "type": "number",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -4384,
        624
      ],
      "id": "4d5cba51-9e98-4aaf-9c41-5a1729c29cd2",
      "name": "4-1c. ë°°ì¹˜3 ë¶„ê¸°"
    },
    {
      "parameters": {
        "operation": "write",
        "fileName": "={{ $json.filePath }}",
        "options": {}
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        -3264,
        32
      ],
      "id": "9623c51e-e8de-4aa1-aba4-9714dfaeeff5",
      "name": "7a-2. ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        -6128,
        752
      ],
      "id": "9092fa85-bf40-4d7f-8757-ba55daf660aa",
      "name": "When clicking â€˜Execute workflowâ€™"
    }
  ],
  "connections": {
    "1. ì£¼ì œ ìƒì„±": {
      "main": [
        [
          {
            "node": "2. ë°ì´í„° ì¶”ì¶œ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "2. ë°ì´í„° ì¶”ì¶œ": {
      "main": [
        [
          {
            "node": "3. ë°ì´í„° ì „ë‹¬",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "4. ì¥ë©´ ë¶„í• ": {
      "main": [
        [
          {
            "node": "5b. ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±",
            "type": "main",
            "index": 0
          },
          {
            "node": "4-1c. ë°°ì¹˜3 ë¶„ê¸°",
            "type": "main",
            "index": 0
          },
          {
            "node": "4-1b. ë°°ì¹˜2 ë¶„ê¸°",
            "type": "main",
            "index": 0
          },
          {
            "node": "4-1a. ë°°ì¹˜1 ë¶„ê¸°",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "5a. ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸": {
      "main": [
        [
          {
            "node": "6a. ì´ë¯¸ì§€ ìƒì„±2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "6a. ì´ë¯¸ì§€ ìƒì„±": {
      "main": [
        [
          {
            "node": "7a-1. ì´ë¯¸ì§€ ë°ì´í„° ì¤€ë¹„",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "8. ë°ì´í„° ë³‘í•©": {
      "main": [
        [
          {
            "node": "9-1. Concat íŒŒì¼ ë‚´ìš© ìƒì„±",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "10. ë™ì˜ìƒ ì œì‘": {
      "main": [
        [
          {
            "node": "11. ë™ì˜ìƒ ì½ê¸°",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "11. ë™ì˜ìƒ ì½ê¸°": {
      "main": [
        [
          {
            "node": "12. ìœ íŠœë¸Œ ì—…ë¡œë“œ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "12. ìœ íŠœë¸Œ ì—…ë¡œë“œ": {
      "main": [
        [
          {
            "node": "13. ì •ë¦¬",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "1. ì£¼ì œ ìƒì„±",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "5b. ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model2": {
      "ai_languageModel": [
        [
          {
            "node": "5a. ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "7a-1. ì´ë¯¸ì§€ ë°ì´í„° ì¤€ë¹„": {
      "main": [
        [
          {
            "node": "7a-2. ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "7b-1. ì˜¤ë””ì˜¤ ê²½ë¡œ ì¤€ë¹„": {
      "main": [
        [
          {
            "node": "7b-2. ì˜¤ë””ì˜¤ íŒŒì¼ ì €ì¥",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "7b-2. ì˜¤ë””ì˜¤ íŒŒì¼ ì €ì¥": {
      "main": [
        [
          {
            "node": "8. ë°ì´í„° ë³‘í•©",
            "type": "main",
            "index": 3
          }
        ]
      ]
    },
    "9-1. Concat íŒŒì¼ ë‚´ìš© ìƒì„±": {
      "main": [
        [
          {
            "node": "9-2. Concat íŒŒì¼ ì €ì¥",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "3-1. ë””ë ‰í† ë¦¬ ìƒì„±": {
      "main": [
        [
          {
            "node": "3-2. ë°ì´í„° ë³µì›",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "3. ë°ì´í„° ì „ë‹¬": {
      "main": [
        [
          {
            "node": "3-1. ë””ë ‰í† ë¦¬ ìƒì„±",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "3-2. ë°ì´í„° ë³µì›": {
      "main": [
        [
          {
            "node": "4. ì¥ë©´ ë¶„í• ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "9-2. Concat íŒŒì¼ ì €ì¥": {
      "main": [
        [
          {
            "node": "10. ë™ì˜ìƒ ì œì‘",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "6a. ì´ë¯¸ì§€ ìƒì„±1": {
      "main": [
        [
          {
            "node": "7a-1. ì´ë¯¸ì§€ ë°ì´í„° ì¤€ë¹„1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "7a-1. ì´ë¯¸ì§€ ë°ì´í„° ì¤€ë¹„1": {
      "main": [
        [
          {
            "node": "7a-2. ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "7a-2. ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥1": {
      "main": [
        [
          {
            "node": "8. ë°ì´í„° ë³‘í•©",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "6a. ì´ë¯¸ì§€ ìƒì„±2": {
      "main": [
        [
          {
            "node": "7a-1. ì´ë¯¸ì§€ ë°ì´í„° ì¤€ë¹„2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "7a-1. ì´ë¯¸ì§€ ë°ì´í„° ì¤€ë¹„2": {
      "main": [
        [
          {
            "node": "7a-2. ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "7a-2. ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥2": {
      "main": [
        [
          {
            "node": "8. ë°ì´í„° ë³‘í•©",
            "type": "main",
            "index": 2
          }
        ]
      ]
    },
    "5a. ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸1": {
      "main": [
        [
          {
            "node": "6a. ì´ë¯¸ì§€ ìƒì„±1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "5a. ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸2": {
      "main": [
        [
          {
            "node": "6a. ì´ë¯¸ì§€ ìƒì„±",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model3": {
      "ai_languageModel": [
        [
          {
            "node": "5a. ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸2",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model4": {
      "ai_languageModel": [
        [
          {
            "node": "5a. ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "4-1a. ë°°ì¹˜1 ë¶„ê¸°": {
      "main": [
        [
          {
            "node": "5a. ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "4-1b. ë°°ì¹˜2 ë¶„ê¸°": {
      "main": [
        [
          {
            "node": "5a. ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "4-1c. ë°°ì¹˜3 ë¶„ê¸°": {
      "main": [
        [
          {
            "node": "5a. ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "7a-2. ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥": {
      "main": [
        [
          {
            "node": "8. ë°ì´í„° ë³‘í•©",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "When clicking â€˜Execute workflowâ€™": {
      "main": [
        [
          {
            "node": "1. ì£¼ì œ ìƒì„±",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "meta": null,
  "pinData": {},
  "versionId": "7218c8a7-93fc-4ed0-bd8c-511a5578a3ad",
  "versionCounter": 1,
  "triggerCount": 0,
  "shared": [
    {
      "updatedAt": "2025-10-17T07:09:55.302Z",
      "createdAt": "2025-10-17T07:09:55.302Z",
      "role": "workflow:owner",
      "workflowId": "nPppSmMzaqMV2k7N",
      "projectId": "IC88dd2d9Hx6YiyI",
      "project": {
        "updatedAt": "2025-09-20T13:52:29.594Z",
        "createdAt": "2025-09-20T13:45:08.916Z",
        "id": "IC88dd2d9Hx6YiyI",
        "name": "Aiden Ahn <senugw0u@gmail.com>",
        "type": "personal",
        "icon": null,
        "description": null,
        "projectRelations": [
          {
            "updatedAt": "2025-09-20T13:45:08.916Z",
            "createdAt": "2025-09-20T13:45:08.916Z",
            "userId": "e6845f9c-5e74-45fb-8e27-14d56a0a1fea",
            "projectId": "IC88dd2d9Hx6YiyI",
            "user": {
              "updatedAt": "2025-11-18T15:52:58.000Z",
              "createdAt": "2025-09-20T13:45:08.643Z",
              "id": "e6845f9c-5e74-45fb-8e27-14d56a0a1fea",
              "email": "senugw0u@gmail.com",
              "firstName": "Aiden",
              "lastName": "Ahn",
              "personalizationAnswers": {
                "version": "v4",
                "personalization_survey_submitted_at": "2025-09-20T13:52:55.248Z",
                "personalization_survey_n8n_version": "1.111.1",
                "companySize": "<20",
                "companyType": "education",
                "role": "business-owner",
                "reportedSource": "google"
              },
              "settings": {
                "userActivated": true,
                "easyAIWorkflowOnboarded": true,
                "firstSuccessfulWorkflowId": "UYmvgcU1ex2B9Ure",
                "userActivatedAt": 1760487644703,
                "npsSurvey": {
                  "responded": true,
                  "lastShownAt": 1763275179469
                }
              },
              "disabled": false,
              "mfaEnabled": false,
              "lastActiveAt": "2025-11-19",
              "isPending": false
            }
          }
        ]
      }
    }
  ],
  "tags": []
}